<?php
require_once __DIR__.'/../conf.php';
require_once  __DIR__.'/../debug.php';
include __DIR__.'/../user_login.php';
include __DIR__.'/impresoras_zeleris.php';

$impresora_selecionada = "";
$div_msg = "";
$serial = "";
$argumento_vacio = false;
function imprimir($impresora_destino, $etiqueta){

    global $impresoras;
    $host= $impresoras['HGU'][$impresora_destino]['IP'];
    $port = $impresoras['HGU'][$impresora_destino]['Puerto'];
    $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
    if ($socket === false) {
        $respuesta = array(
            'Error_id' => -3,
            'Error_msg' => "socket_create() failed. reason: " . socket_strerror(socket_last_error()));
    } else {
        // Socket conectado.
        $conexion = socket_connect($socket, $host, $port);
        // Conexion establecida.
        if ($conexion === false) {
            $respuesta = array(
                'Error_id' => -4,
                'Error_msg' => "socket_connect($conexion) failed. reason: " . socket_strerror(socket_last_error($socket)));
        } else {
            socket_write($socket, $etiqueta, strlen($etiqueta));
            $respuesta = array(
                'Error_id' => 0,
                'Error_msg' => "Impresion correcta");
        }
        if ($socket) {
            socket_close($socket);
        }
    }
    return $respuesta;
}
if (array_key_exists($_POST['impresora'], $impresoras)) {
    $impresora_selecionada = $_POST['impresora'];
}

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $class = "alert alert-danger alert-dismissible";
    $msg = '<strong>Error al imprimir la etiqueta (Avisar a Sistemas)</strong>';
    if (empty($_POST['serial'] )||empty($_POST['impresora'])) {
        $msg =  '<strong>Error:</strong> ';
        $msg .= "El campo serial o impresora está vacio";
    }else{
        $serial = trim($_POST['serial']);
        $impresora_destino = $_POST['impresora'];
        // Conectamos a la DB
        $mysqli = new mysqli(MySQL_SERVER, MySQL_USER, MySQL_PASSWORD, MySQL_DB);
        if ($mysqli->connect_errno) {
            $msg = '<strong>Error:</strong> ';
            $msg .= "Fall&oacute; la conexi&oacute;n a MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
        }else{
            $peticion_sql =
                "SELECT
                    LU.serial_number AS serial,
                    mac AS 'mac',
                    ssid AS 'ssid',
                    wlan_pass AS 'WLAN_pass',
                    ssid_5GHz AS 'SSID_5GHz',
                    wlan_pass_5GHz AS 'WLAN_pass_5GHz',
                    device_password AS 'password_device',
                    LU.intranet_model_id AS ' intranet_model_id',
                    CONCAT(RIGHT('0' + CAST(YEAR(CURDATE()) AS CHAR),
                                2),
                            RIGHT(CONCAT('0', CAST(MONTH(CURDATE()) AS CHAR)),
                                2)) AS 'fecha_fabricacion'
                    ,(
                        SELECT validated
                        FROM warehouse.uut_status
                        WHERE logger_uut_id = LU.id limit 1
                    ) AS 'validado'
                FROM
                    warehouse.uut_info AS WUI
                        INNER JOIN
                    validator.logger_uut AS LU ON LU.id = WUI.logger_uut_id
                WHERE
                    LU.serial_number = '$serial'";
            $resultado = $mysqli->query($peticion_sql);
            if (empty($resultado)) {
                $msg = '<strong>Peticion vacia.</strong> ';
            }else{
                    /* obtener un array asociativo */
                    while ($fila = $resultado->fetch_assoc()) {
                        $array_equipos[]= $fila;
                        unset($fila);
                    }
                    /* liberar el conjunto de resultados */
                    mysqli_free_result($resultado);
                $numero_equipos = count($array_equipos);
                if(empty($numero_equipos)){
                    $msg = '    <strong> No existen equipos con este serial ' .$serial .'</strong>';
                    $msg .= '    <p>';
                    $msg .= '        Por favor, intentalo con otro serial .';
                    $msg .= '    </p>';
                }elseif ($numero_equipos =! 1){
                    $msg = 'Hay mas de un equipo con el mismo serial'. $array_equipos;
                }else{
                    foreach ($array_equipos[0] as $clave => $valor) {
                            if (empty($valor) ) {
                                $argumento_vacio = TRUE;
                                array_push($campos_vacios, $clave);
                        }
                    }
                    if ($argumento_vacio) {
                        $msg = 'Algunos campos obligatorios estan vacíos (' . implode(",", $campos_vacios) . ')';
                    }else{
                        $validado = $array_equipos[0]['validado'];
                        $serial= $array_equipos[0]['serial'];
                        $mac= $array_equipos[0]['mac'];
                        $ssid = $array_equipos[0]['ssid'];
                        $wlan_pass = $array_equipos[0]['WLAN_pass'];
                        $ssid_5g = $array_equipos[0]['SSID_5GHz'];
                        $wlan_pass_5g = $array_equipos[0]['WLAN_pass_5GHz'];
                        $password_device = $array_equipos[0]['password_device'];
                        $fecha_fabricacion = $array_equipos[0]['fecha_fabricacion'];
                        $intranet_model_id = $array_equipos[0]['intranet_model_id'];
                        switch ($intranet_model_id) {
                            case 3850:
                            // Router Smart Wifi (HGU) RTF8115VW
                                $logo = "ASKEY" ;
                                $sace = "2889";
                                $nrc = "0128";
                                $modelo = "Router Smart Wifi (HGU) RTF8115VW";
                                $codigo_cliente = "00412979";
                                $codigo_fabricante = "21";
                            case 3852:
                            // Router Smart Wifi (HGU) GPT-2741GNAC
                                $logo = "MITRASTAR";
                                $sace = "2887" ;
                                $nrc = "0128";
                                $modelo = "Router Smart Wifi (HGU) GPT-2741GNAC" ;
                                $codigo_cliente = "00412977";
                                $codigo_fabricante = "20";
                            case 3854:
                                // MITRASTAR Router Smart WiFi (HGU) GPT-2541GNAC
                                $logo = "MITRASTAR" ;
                                $sace = "2886";
                                $nrc = "0128";
                                $modelo = "Router Smart Wifi (HGU) GPT-2541GNAC";
                                $codigo_cliente = "00412976";
                                $codigo_fabricante = "20";
                            case 3894:
                                // Router Smart Wifi(HGU) RTF3505VW (Nuevo)
                                $logo = "ASKEY" ;
                                $sace = "2847";
                                $nrc = "0128";
                                $codigo_cliente = "00412978";
                                $codigo_fabricante = "21";
                                $modelo = "Equipo para acceso Fibra Optica RTF3505VW";
                        }
                        $datamatrix = "00" . $codigo_cliente . $codigo_fabricante . "0000" . "0000" . $mac;
                        if($validado!=1){
                                $msg = ' EL equipo no esta validado';
                        }elseif ($serial != $mac ){
                            $msg = 'El campo Serial:' . $serial . 'es distinto de la Mac: ' . $mac ;
                        }elseif  (!empty($datamatrix) and  strlen($datamatrix) <> 32){
                            $msg = 'El campo datamatrix:' . $datamatrix . 'no tienen 32 digitos de tamaño' ;
                        }else {
                            if($logo == "MITRASTAR" ){
                            $codigo_etiqueta = 'CT~~CD,~CC^~CT~
                            ^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD20^JUS^LRN^CI0^XZ
                            ~DG000.GRF,02944,092,
                            ,:::::::::::::::I03FnXFE:,:::::::::::::~DG001.GRF,02944,092,
                            ,::::::::::::::::::::::::::I03FnXFE:,::~DG002.GRF,00640,004,
                            ,:::::::::::::::::::::::::::I0180,::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::,::::::::::::::~DG003.GRF,02944,092,
                            ,:::::::::::::::I03FnXFE:,:::::::::::::~DG004.GRF,01024,016,
                            ,::::::::::::::::::H021108202001C043A4210E101,I0H10820200220446421I181,I0H1085050041048242120941,I0H1085050H01048242120941,I0H108505007F048242120921,I0H108J8041048242120911,:I0H108J80220C464631H109,H021789050401C743A39D0E105,J010105040K020J0105,J010105040K020J0103,I0160A02020K020J0101,,::::::::::::::::::::::::::::::::~DG005.GRF,01024,016,
                            ,::::::::::::::::::::::Y01E0,Y0210,Y04,L0H170BC5C104BC5C0E07C,M0188C262104C26211082,M01048241104824120901,M01048241104824100901,M01049C4110482413F9,M0104E0411048241208E0,M0104824110482412081C,M018H846210C826211002,L0H170785C174825C0E001,M010I040O0101,M010I040P082,M010I04010N07C,,:::::::::::::::::::::::::~DG006.GRF,00768,012,
                            ,:::::::::::::::::::::::::::::::M020E042F10F8,N0H104309104,N0208A209202,P08A209001,N03F91271001,N02091381001,N02091209001,N0H120A11001,M020E209E1001,T01202,T0H104,T010F8,,:::::::::::::::::::~DG007.GRF,00512,016,
                            ,::::::::::::0108841010H0E021D210870808,I0H84101001102232108H8C08,I0H8428280208241210904A08,I0H8428280H08241210904A08,I0H84282803F8241210904908,I0H8K402082412109048H8,:I0H8K401106232318I848,010BC4828200E3A1D1CE870828,J08082820K010K0828,J08082820K010K0818,I0B0501010K010K0808,,::::::~DG008.GRF,01024,016,
                            ,::::::::::::::::Y0F,X01080,X020,L08B85E2E0825E2E0703E0,M0C461310826131088410,M08241208824120904808,M08241208824120804808,M0824E2088241209FC8,M082702088241209047,M082412088241209040E0,M0C442310864131088010,L08B83C2E0BA412E070H08,M080H020P0808,M080H020P0410,M080H020080M03E0,,:::::::::::::::::::::::::::::::~DG009.GRF,00768,012,
                            ,::::::::::::::::::::::::::L01070217887C0,N0H821848820,M010451049010,O0451048008,M01FC89388008,M010489C08008,M010489048008,N08905088008,L0107104F08008,T09010,T0H820,T087C0,,::::::::::::::::::::::::~DG010.GRF,00768,012,
                            ,:::::::::::::::::::::::::::::::::N07C08808H8080,N082004080C080,M0101002080A080,P0802080A080,P08010809080,P0803F808H80,P08040808H80,P08080808480,P08080808280,M01010080808280,N0820040808180,N07C003F808080,,:::::::::::::::::~DG011.GRF,01280,020,
                            ,:::::::::::::::::::::::::::::::N040Q02,N080Q01,:N08421210A00C011003A5E00440080,M010421210A00C0108046610040H080,M01045122890120208082410040H080,:M0104492248FE1FC080824E0040H080,M0104892448821040808270H040H080,M01048924484408808082411FC03F80,M01050528284408808046420040H080,N085052828440881003A3C0040H080,N0860330182805010H020I040H080,:N0H40120081002020H02003FC07F80,,::::::::::::::::~DG012.GRF,00768,012,
                            ,::::::::::::::::::::::::::::::::::M01FF1F04043E,O0120840441,O014042088080,O010022088080,O010023F880,O0100211070,N0HFH021100E,O0100211001,O010020A0H080,O014040A08080,O012080A041,M01FF1F00403E,,::::::::::::::::~DG013.GRF,00512,008,
                            ,:::::::::::::::::::::::::::::::0117038421,H01884H421,H010482451,:H010482449,H010482489,:H018844505,H017038505,H010I0603,:H010I0401,,:::::::::::::::::::~DG014.GRF,03328,052,
                            ,::::::::jP030,::::K0318F06060F80FC31E01B86060F80F800C786018183E03E0H0600C0C0181F00F80600C7FF03E0300186607B71C3030,K030FF86063FC1FE1FF01BC6061FC1FC007FC6018187F07F0H0600C0C0187FC1FC0600C7FF0FF030018660FF79E3030,M0F1C60630E3871E3818C60638E3860078E601818E38E180060I0C0H060C30E060J061C3830030C01C71863030,M0E0C6066073031C1818C60670730700706601819C1CC1C0060I0C0H0C06606060J0C181830030C03831863030,M0C0C606003300181818C6066030030060660181980C00C0060I0C0H0C06603060I018180030030C03031863030,M0C1C6060033E0183818C6066030030060E60181980C00C0060I0C0H0C06603060I03030H030061803031863030,M0CF86067FF1FC19F018C6066030030067C60181980C00C0060I0C0H0C06603060I06033C030061803031863030,M0HF06067FF07E1FE018C606603003007F860181980C00C0060I0C0H060C607060I0C037F030061803031863030,M0F006066030071E0018C6066030030078060181980C00C0060I0C0H03F830F060H01803C30300E3803031863030,M0C0C60E603003181818C60E70730700606601839C1CC1C0060I0C0H01F03FB060H03003018300C3003831863070,M0E1C71E30E3071C3838C71E38E38E0070E601C78E38E380060I0C0H03180F3060H06003018300C30018718638F0,K0307F83F61FC1FE0FF3FBF3F61FC1FC003FC600FD87F07F0H0H6I0HCH060C003066006003018330C3061FF7FF9FB0,K0303E01E60F80FC07C3DBF1E60F80F8001F06007983E03E0H06E0H0DC0060C00606E006033018371860607B7FF8F30,gK0C0S060R07C0H0F80060C60607C0060338383E1860J01860030,P01D80Q0C0S060R070I0E0H071C70E070H03061830381860J01860030,P03F80Q0C0S060R060I0C0H03F83FC060H03FE0FE03030C0J01860030,P0370R080S060R060I0C0H01F01F0060I0F807C03030C0J01040030,,::::::::gP06060F80H0C1F0E19E03E0E00C019E3803001B80301FC00FC018006180300FC007E,gP06063FC0H0C7F8F1BF07F0700C01BF3C030019C0303FE03FF8180061C0303FF01FF80,gP060630E0H0C61C31E38E38300C01E38C018030C0307070F03C180061E0307038381C0,gP06066070H0HC0E31C19C1C380C01C18C018030E0306030C00E180061E030E01C300E0,gP06060030H0C0063181980C1C0C01818C01C0707030C018C006180061B030C00C60060,gP06060030H0C0063181980C1C0C01818C00FFE07030C018C0071800619831C00660030,gP06067FF0H0CFFE3181980C0E0C01818C00FFE03830C018C003180061983180060H030,gP06067FF0H0CFFE3181980C070C01818C0060C01C30C018FE031800618C3180060H030,gP06066030H0HC063181980C0FFC01818C0060C03FF0C018FE03187FE18E3180060H030,gP060E6030H0HC0631819C1C3FFC01818C0060C0FHF0C0180H03187FE1863180060H030,gP071E30E001C61C31818E38700C01818C003181C030C0180H03180061833180060H030,gP03F61FC01FC3F8FD8187F0600C0181BF0031818030C0180H071800618331C0060H030,gP01E60F801EC1F0FD8183E0600C0181BF003B818030C018C00618006181B0C00C60060,hI030L0600C0J0C001B018030C018600E18006180F0E01C300E0,hI030L0700C0J0C001B01C030C018783C18006180F07038381C0,hI030L03FFC0J0C0H0E00FHF0C0183FF818FFE180703FF01FF80,hI020L01FFC0J080H0E007FF0C0180FE018FFE180300FC007E,,::::::~DG015.GRF,01152,012,
                            ,::::::::::::::::::::::::::::::::::::::::::::::::::N0F178801008841010M010984801008841010M010104801008842828:N0F104801008842828O090487F00884J4O090488100884J4M01090490100884J4N0F10490100BC48282R09010H0808282R0H810H0808282R087F00B050101,::::::::::::::::::::::::::::::::~DG016.GRF,00512,008,
                            ,::::::::::::::::::::::O0H841010:O0H842828::O0H8K4::O0BC48282P0808282:O0B050101,::::::::::::::::::::::::::::~DG017.GRF,01152,012,
                            ,::::::::::::::::::::::K010M0H1,K07E0L01E80,K07FD0K01FFC,K07FF80J03FFE,K07FHFK01FHFC0,K07FFE0J01FHFC0,K07FHFC0I01FIF0,L03FFE0J02FHF8,L017FF0K01FFC,N0HFM03FC,N0HFC0K01FE,N03F80L0FE,N01FC0L07F,O0FE0L03F80,O0HFM03FC0,O07E0L01F80,O07F0L01FC0,O03F0M0FC0,O07F0M0FC0,O03F80L0FE0,L07FIF80K017F0,L03FIF80L0FE0,L07FIFC0L07E0,L03FIF80L07E0,L07FIF80L07F0,L03FIF80L0FE0,L0I57F80L07E0,O03F80L0FE0,O07F0L01FC0,O03E0M0FC0,O07F0L01FC0,O0FE0L03F80,N01FF0L07F80,N01FE0L07F80,N07FC0L0HF,N07F80K01FE,M01FF0L07FF,M03FE0L0HF8,L05FFE0K07FFC,K03FHF80I01BFHF0,K07FHF80I01FIF0,K07FFE0J01FHF80,K07FFC0J01FHF,K07FE0K03FFA,K07FC0K01FF0,K0280M08,,::::::::::::::::::::::::::~DG018.GRF,07680,060,
                            ,::::::::::::::::::::::::::jG017109210F008478078B8B87108E970040,jG0189092110808484084C4C489091988040,jG0109092120408404084848409090908040,jG0I1092100408404084848809090910040,jG01E10921004084FC08484F0090909E0040,jG0101092100408484084848009090900FC0,jG0109192300408C84084C48489191908040,jH0F0E91D20407478078B8787168E8F0040,jM0H1080M080M080H040,jK01010F0N080I010H0801FC0,,:::U020g080gV040gN02,:I0425C2H25C08021E1E1E02E211C424710409084B80203C3884788E1F01097108E2123882044817170F1020423C5CB820F10909021E001040,I04262I26208002121210312122424890400884C4020424484849120810989091212448200481898908820424244C4210909090021001840,I0424255242080021212102121024248104008848402002048404812081090908121240820048109090842042424484510909090021001440,I0424455244080021212002121024248104005848802002048404812001090908121240820048109110822042424488510909090021001440,I042785527808002121200212102424710400284F07E07E0484FC813801090908121238820048109E108FE0424244F0890909090023001240,I0424055240080021211C021210242409FC004848082042048484810701090908121204FE004810901090204242448089090909001D039240,I0464288A420800212120021232246489040088C8482042448C84910081190919123244820048189090902046424485050919190H01045140,I03A3C88A3C08002121210211D1C3A47104010B4788203C3874788E2080E908E8E1D238820048170F0F10203A3C5E7904F0E8E90H01045140,S08002121210I010K01040H080H0820P02080K080K082004810J01020K040N0100220450C0,O02007F001E1E1E0I010I0401040H080H07E0N0801F0L080H020082004810K0FE0J0H4O01001C039040,,:::::iY012E71C5C1724H4H0479C84B87108E970040,iY0131122621124H4I084484C489091988040,iY0121120421124A40I0H4848409090908040,iY0122120441124A40I0H4848809090910040,iY013C11C781124A40H0FC484F0090909E0040,iY0120102401125140H0844848009090900FC0,iY0321122423125140H08448C8489191908040,iY0D1E79C3CD7A60C00479E74787168E8F0040,jH010J01060C0J040N080H040,jH010J0124040J040J010H0801FC0,,:::::jO010100413F9FD0102481001040,jO01010040H08050102441001840,jO03FBF840H08048202421001440,jO01090880H0804FE7A411001440,jO0J1080H0804H40247F001240,jO012120803F9FC4402481039240,jO0121210I08042802481045140,jO01414101008042802481045140,jO0181820I080428024810450C0,jO010103F03F9FC100247F039040,,:::::jM03C3C3C3C7E083C3C3F010090F,jM0H242H242040842H2410I091080,jM04242424208084242410I092040,jM04042404210104240410I090040,jM04042404220104240410I090040,jM0423C423C40103C423F001F90040,jM03E423E424020423E410I090040,jN024202424220420241010092040,jN0H42044242404204410I091080,jM07C3C7C3C3C7E3C7C3F003F90F,,:::hY04,:hN010709FC87C048090501011F1FC101084047E0410F0FE0801008F38E2E2E1E08040,hP0H8H040820080985010120804101084048204110802080I09089131312108040,hO01040040820041144820120804082082090204120402080I09088121212108040,hO0104004080H07F144FE0120H040FE083F90204100402080I09088121212108040,hO01040040E0H0H2124H43F38004044081H10204100402080I09088121212108FC0,hO010400401C0022124I41071FC044081H10207F004FE080I09088121212109040,hO01040040020014114284100804028080A10204100402080H019089121312119040,hO01040040820014114284120804028080A102041204020801068F3CE212E1E69040,hO0104004082001410C284120804028080A08204110802080L080H020I01040,hO010400407C0H08104103F1F1FC0107F0407E0410F0FE7F0L080H020J0FC0,,iI05,iI0A,,:::::::~DG019.GRF,02304,024,
                            ,:::::::::::::::::::::::::::::::::::::::::::::::::::J010E39783840404BC00E0F070381C4010H0F071CBC0FEJ0I10984H420404C201H108H8H4H240100108H84C2102J012089048210404820209010482412020010104482202J0100890482104048202090H0402012020010104482402J013F890482084049C0208F1FC02011FC0H0F10449C402J01208904821FC04E00208090402011040I09044E0402J012089048220404820208090482410880I0904482402J03110904I404048401H108H8H4H208800108H8484402I01D0E3D0438404047800E0F070381C0880H0F071E78402N080I0404040T050M0400202N080I0204040T050M0400102N080I01FC040T020M040H0FE,:::::::::::::::::::::::::::::::~DG020.GRF,00256,008,
                            ,::::::J0303FC3,J0307FC3,L0E0C3,L0C0C3,K0180C3,::::J03180C3,:L0C0C3,L0E0C3,L07FC3,L03FC3,,:::::::::~DG021.GRF,03072,024,
                            ,:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::Q0828080H08008A0H08080K08080,O070C7C0FC07FF1C7C00C1F07C705C1C0,O020A2A0AA0AHA0A2A00A2A82820280A0,O07175701C1F551C1701717430707C1C0,O020A0280A0A0H0A0A00A0282820280A0,O070E07C0F1F001C0700E05C7C707C1C0,O020A0280A0A0H0A0280A02828202A080,N017170700717401407016014307044140,O0A0A0280A0AA00A0A00A0282828AA280,M015F075F05F05F41F5F17C05C7C70C75C0,N0HA02AA0AA00A802AA0AA0A8282882280,M01D703F507F007D077C157174301147140,N08200A80AA0H0A00A808A0A8282882280,N040H04001F001F0M05C041DC71C0,V0A0H0A0M028002882A80,V0507H7N0141017017,X0HA80O0280A80A80,X0HD40O07C1F01F,gQ02,gQ01,,:::::::::::::::::::::::::::::::::~DG022.GRF,03072,032,
                            ,::::::::::::hV080,hU01C0,hM0H2A0J03E0,hM015D40I07F0,hM0BFHF80H07F8,hM07FHFC0H07F0,hL03FIFE0H03F8,hL03FJFI03FC,hL0LF8003FC,hL07FJFC001FC,hK02FKFE003FE,hK01FKFE001FC,h0F80H03FLF801FE,gY01F0I01FLFI0HF,gY03F80H03FLF800FF,gY01FC0H07FLFC007F,gY03FC0H0NFE00FF80,gY07FC0H07FLFC007F,gY07FE0H0NFE007F80,gY07FC0H07FLFD003F,N080A80J080I080H0A80I080K0HFE0H0OF803F80,M01017405007D050050017405014050I07FC001FNFC03F,M0383FF8FA3FF8E00F80FFE0F03E0780H0HFE002FNFE03F80,M03070707C1C10701F007170701C070I07FC001FNFC01F80,M038F8383E3800F03B80E0B8F01C0380H0HFC003FNFE03F80,M030701C1C30H07019C1C038701C070I07FC001FOF03F80,M038E0382E3A00E03AE2E038E03E0780H0HFE003FOFA3F80,M01050180C1C007070C1C018701C070I07FC007FOFC1F80,M038FAF80E1F80F8F8E1E038F01E0380H0HFC00FPFEBF80,M0307FF00C07F0707071C01C701C070I07FC007FHF57FMF,M038FFE00E02F8E0E0F3E03AF03E0780H0HFE00FHFEABFMF80,M01070I0C007070C071C018701C070I07FC01FHFC01FMF,M038E0I0E0038F0E0F8E038F81E0380H0HFC03FHF800FMF80,M07070I0C003071C070E070701C070I07FC07FHFI07FLF,L02F8FAA0FE2AF8E2E038FAF87EFFAF0I0HFE0FIFI03FLF80,L07D01FF05C1FD071C0105FD01FF7DC0I07FC1FIFI01FLF,L0BA00FE0BE1FE0A080383FA00FEBF80I0HFEFIFE0I0MF80,S01C0gI07FKFC0I07FKF,T0E0gI07FKFE0I0LFE,T040gI07FKFC0I07FJFC,T080gI03FKF80I03FJFE,gY07FKFC0I01FJFC,gY03FKF80I02FJFE,gY01FKFL07FIF8,gY03FKF80J0KF8,gY01FKFL07FIF0,gY03FJFE0K03FHFE0,gY01FJFC0K01FHFC0,h0KFE0L0IF80,h07FIFC0L05FF,h0KFA0L02AA,h07FIF0,h03FHFE0,h01FHFC0,h02FHFA0,hG07FD,hG03FA,,:::::::::::::::::::::::::~DG023.GRF,02048,016,
                            ,::::::::::::P03FQFE,P01FQFC,P03FQFE,P01FQFC,P03FQFE,P01FQFC,P03FQFE,P01FQFC,P03FQFE,P01FQFC,P03FQFE,P01FQFC,P03FQFE,,::::::::::::gJ020,gJ040,O0380R0E0,O010S080,P0C0Q0380,P040Q03,P030H020I020H0E,P010H070I040H0C,Q0801FE0H0E0018,Q0401FE0H060010,Q0203FJFE00E0,Q0103FF0H010040,R083FE0H018180,R043FE0H0101,R023FE0H0386,R0H1FC0H0104,S08F80H0188,S0H4J0H10,S0H2K0A0,S0140I01C0,T0E0J080,T040I01,T060I0380,T070I04,T0F80H0H80,T0H4H010,T0E6002080,T0410040,T0C1808080,T040410040,T0C0E30080,T040140040,T0803E0080,T0401C0040,T0A03E00E0,V040H040,T080E380C0,V0410040,T08380E060,T081004040,T08EAAB860,U0IF1040,T0BFHF8E20,S0I1H504,R01FE0I03A0,R0H1C0I0140,R0H380J0E0,R0H1L040,R03F80J020,R01D0K030,R03B80J038,R0H1L014,R02180J0H2,R0450K0H1,Q028FMFE80,Q0H1F80I07C040,Q021F808H83E020,Q04044077C70010,P028003AHAEF8028,P010I05D1570H04,P020J0FAE20H0A,P040J0H540I01,P0A0J0HEA0I0380,O010S040,O0380R0E0,,O020S020,,:::::::::::::::::::::^XA
                            ^MMT
                            ^PW735
                            ^LL0735
                            ^LS0
                            ^FT32,128^XG024.GRF,1,1^FS
                            ^FT32,512^XG025.GRF,1,1^FS
                            ^BY48,48^FT659,431^BXI,3,200,0,0,1,~
                            ^FH\^FD'.$datamatrix.'^FS
                            ^FT560,606^A0I,20,19^FH\^FD' . $modelo . '^FS
                            ^FT362,337^A0I,20,19^FH\^FD' . $ssid . '^FS
                            ^FT362,309^A0I,20,19^FH\^FDWPA2-PSK^FS
                            ^FT362,283^A0I,20,19^FH\^FD' . $wlan_pass . '^FS
                            ^FT365,201^A0I,20,19^FH\^FD' . $ssid_5g . '^FS
                            ^FT362,175^A0I,20,19^FH\^FDWPA2-PSK^FS
                            ^FT362,150^A0I,20,19^FH\^FD' . $wlan_pass_5g . '^FS
                            ^FT142,513^A0I,20,19^FH\^FD' . $sace. '^FS
                            ^FT142,545^A0I,20,19^FH\^FD' . $fecha_fabricacion. '^FS
                            ^FT142,576^A0I,20,19^FH\^FD' . $nrc. '^FS
                            ^FT166,608^A0I,20,19^FH\^FD' . $codigo_cliente . '^FS
                            ^BY3,3,54^FT560,449^BCI,,Y,N
                            ^FD>:' . $serial . '^FS
                            ^BY2,3,50^FT300,56^BCI,,Y,N
                            ^FD>:' . $password_device . '^FS
                            ^FT0,640^XG000.GRF,1,1^FS
                            ^FT0,512^XG001.GRF,1,1^FS
                            ^FT608,640^XG002.GRF,1,1^FS
                            ^FT0,416^XG003.GRF,1,1^FS
                            ^FT384,384^XG004.GRF,1,1^FS
                            ^FT384,352^XG005.GRF,1,1^FS
                            ^FT416,320^XG006.GRF,1,1^FS
                            ^FT384,224^XG007.GRF,1,1^FS
                            ^FT384,224^XG008.GRF,1,1^FS
                            ^FT416,192^XG009.GRF,1,1^FS
                            ^FT320,608^XG010.GRF,1,1^FS
                            ^FT256,576^XG011.GRF,1,1^FS
                            ^FT320,544^XG012.GRF,1,1^FS
                            ^FT576,640^XG013.GRF,1,1^FS
                            ^FT288,96^XG014.GRF,1,1^FS
                            ^FT576,288^XG015.GRF,1,1^FS
                            ^FT608,416^XG016.GRF,1,1^FS
                            ^FT480,608^XG017.GRF,1,1^FS
                            ^FT32,736^XG018.GRF,1,1^FS
                            ^FT480,160^XG019.GRF,1,1^FS
                            ^FT448,448^XG020.GRF,1,1^FS
                            ^FT0,736^XG021.GRF,1,1^FS
                            ^FT480,736^XG022.GRF,1,1^FS
                            ^FT608,640^XG023.GRF,1,1^FS
                            ^FO488,626^GB0,109,2^FS
                            ^FO14,602^GB610,0,2^FS
                            ^FO570,603^GB0,22,2^FS
                            ^FO197,603^GB0,22,2^FS
                            ^FO415,509^GB0,93,2^FS
                            ^FO14,570^GB404,0,2^FS
                            ^FO14,540^GB404,0,2^FS
                            ^FO164,509^GB0,93,2^FS
                            ^FO34,275^GB652,95,2^FS
                            ^FO34,142^GB652,97,2^FS
                            ^FO34,30^GB652,81,2^FS
                            ^PQ1,0,1,Y^XZ
                            ^XA^ID000.GRF^FS^XZ
                            ^XA^ID001.GRF^FS^XZ
                            ^XA^ID002.GRF^FS^XZ
                            ^XA^ID003.GRF^FS^XZ
                            ^XA^ID004.GRF^FS^XZ
                            ^XA^ID005.GRF^FS^XZ
                            ^XA^ID006.GRF^FS^XZ
                            ^XA^ID007.GRF^FS^XZ
                            ^XA^ID008.GRF^FS^XZ
                            ^XA^ID009.GRF^FS^XZ
                            ^XA^ID010.GRF^FS^XZ
                            ^XA^ID011.GRF^FS^XZ
                            ^XA^ID012.GRF^FS^XZ
                            ^XA^ID013.GRF^FS^XZ
                            ^XA^ID014.GRF^FS^XZ
                            ^XA^ID015.GRF^FS^XZ
                            ^XA^ID016.GRF^FS^XZ
                            ^XA^ID017.GRF^FS^XZ
                            ^XA^ID018.GRF^FS^XZ
                            ^XA^ID019.GRF^FS^XZ
                            ^XA^ID020.GRF^FS^XZ
                            ^XA^ID021.GRF^FS^XZ
                            ^XA^ID022.GRF^FS^XZ
                            ^XA^ID023.GRF^FS^XZ
                            ^XA^ID024.GRF^FS^XZ
                            ^XA^ID025.GRF^FS^XZ';

                            }elseif ($logo == "ASKEY" ){
                                $codigo_etiqueta = 'CT~~CD,~CC^~CT~
                                ^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD20^JUS^LRN^CI0^XZ
                                ~DG000.GRF,02944,092,
                                ,:::::::::::::::I03FnXFE:,:::::::::::::~DG001.GRF,02944,092,
                                ,::::::::::::::::::::::::::I03FnXFE:,::~DG002.GRF,00640,004,
                                ,:::::::::::::::::::::::::::I0180,::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::,::::::::::::::~DG003.GRF,02944,092,
                                ,:::::::::::::::I03FnXFE:,:::::::::::::~DG004.GRF,01536,016,
                                ,::::::::::::::::::::::::::::::::L0H505K54550554054014,L0H202A2A0A02202H202A020,L0H50115515I51515154050,L0HAI0HA0A8A82A028AA880,K01540015415H545405J540,L0A80H0A80AHA82A0H0HA080,K01540015415H5055001541,K02A80H0A80AHA82A800A82,J0155C05H5415D545D541545,K08A0H02A00A2A002A00280,J051540055015H5101541554,J020A800AA028A8280A80A88,I014154005505154545545H50,L0A800A8080A8282A02AA0,I0501545H545015415H501540,I0800A82AA8202A80A80H0A80,I04004L4H0400440H0H40,,::::T015,T02A,Q04055D5404,S020020,R0514151,S0H8082,Q0H5C455450,Q0282002820,P0H1H5141155,Q0820I028A,P05C5445455F,P02A0K02A,P0H741141177,P02A820800AA,P05FD44545FF,Q0HA82002AA,P017751H1H74,Q0IA082AA8,Q05FF447FF4,R0HA80AHA0,Q0177517740,S0KA,S05DFD4,T0H2,,::::::::::::::::~DG005.GRF,01024,016,
                                ,::::::::::::::::::H021108202001C043A4210E101,I0H10820200220446421I181,I0H1085050041048242120941,I0H1085050H01048242120941,I0H108505007F048242120921,I0H108J8041048242120911,:I0H108J80220C464631H109,H021789050401C743A39D0E105,J010105040K020J0105,J010105040K020J0103,I0160A02020K020J0101,,::::::::::::::::::::::::::::::::~DG006.GRF,01024,016,
                                ,::::::::::::::::::::::Y01E0,Y0210,Y04,L0H170BC5C104BC5C0E07C,M0188C262104C26211082,M01048241104824120901,M01048241104824100901,M01049C4110482413F9,M0104E0411048241208E0,M0104824110482412081C,M018H846210C826211002,L0H170785C174825C0E001,M010I040O0101,M010I040P082,M010I04010N07C,,:::::::::::::::::::::::::~DG007.GRF,00768,012,
                                ,:::::::::::::::::::::::::::::::M020E042F10F8,N0H104309104,N0208A209202,P08A209001,N03F91271001,N02091381001,N02091209001,N0H120A11001,M020E209E1001,T01202,T0H104,T010F8,,:::::::::::::::::::~DG008.GRF,00512,016,
                                ,::::::::::::0108841010H0E021D210870808,I0H84101001102232108H8C08,I0H8428280208241210904A08,I0H8428280H08241210904A08,I0H84282803F8241210904908,I0H8K402082412109048H8,:I0H8K401106232318I848,010BC4828200E3A1D1CE870828,J08082820K010K0828,J08082820K010K0818,I0B0501010K010K0808,,::::::~DG009.GRF,01024,016,
                                ,::::::::::::::::Y0F,X01080,X020,L08B85E2E0825E2E0703E0,M0C461310826131088410,M08241208824120904808,M08241208824120804808,M0824E2088241209FC8,M082702088241209047,M082412088241209040E0,M0C442310864131088010,L08B83C2E0BA412E070H08,M080H020P0808,M080H020P0410,M080H020080M03E0,,:::::::::::::::::::::::::::::::~DG010.GRF,00768,012,
                                ,::::::::::::::::::::::::::L01070217887C0,N0H821848820,M010451049010,O0451048008,M01FC89388008,M010489C08008,M010489048008,N08905088008,L0107104F08008,T09010,T0H820,T087C0,,::::::::::::::::::::::::~DG011.GRF,00768,012,
                                ,:::::::::::::::::::::::::::::::::N07C08808H8080,N082004080C080,M0101002080A080,P0802080A080,P08010809080,P0803F808H80,P08040808H80,P08080808480,P08080808280,M01010080808280,N0820040808180,N07C003F808080,,:::::::::::::::::~DG012.GRF,01280,020,
                                ,:::::::::::::::::::::::::::::::N040Q02,N080Q01,:N08421210A00C011003A5E00440080,M010421210A00C0108046610040H080,M01045122890120208082410040H080,:M0104492248FE1FC080824E0040H080,M0104892448821040808270H040H080,M01048924484408808082411FC03F80,M01050528284408808046420040H080,N085052828440881003A3C0040H080,N0860330182805010H020I040H080,:N0H40120081002020H02003FC07F80,,::::::::::::::::~DG013.GRF,00768,012,
                                ,::::::::::::::::::::::::::::::::::M01FF1F04043E,O0120840441,O014042088080,O010022088080,O010023F880,O0100211070,N0HFH021100E,O0100211001,O010020A0H080,O014040A08080,O012080A041,M01FF1F00403E,,::::::::::::::::~DG014.GRF,00512,008,
                                ,:::::::::::::::::::::::::::::::0117038421,H01884H421,H010482451,:H010482449,H010482489,:H018844505,H017038505,H010I0603,:H010I0401,,:::::::::::::::::::~DG015.GRF,03072,048,
                                ,::::::::jO06,::::J0631E0C0C1F01F863C0370C0C1F01F0018F0C030307C07C0H0C018180303E01F00C018FFE07C060030CC0F6E38606J061FF0C0C7F83FC3FE0378C0C3F83F800FF8C03030FE0FE0H0C01818030FF83F80C018FFE1FE060030CC1FEF3C606K01E38C0C61C70E3C70318C0C71C70C00F1CC03031C71C30H0C0H0180H0C1861C0C0J0C3870600618038E30C606K01C18C0CC0E6063830318C0CE0E60E00E0CC0303383983800C0H01800180CC0C0C0I0183030600618070630C606K01818C0C0066003030318C0CC0600600C0CC0303301801800C0H01800180CC060C0I03030H0600618060630C606K01838C0C0067C03070318C0CC0600600C1CC0303301801800C0H01800180CC060C0I06060H0600C30060630C606K019F0C0CFFE3F833E0318C0CC0600600CF8C0303301801800C0H01800180CC060C0I0C06780600C30060630C606K01FE0C0CFFE0FC3FC0318C0CC0600600FF0C0303301801800C0H0180H0C18C0E0C0H01806FE0600C30060630C606K01E00C0CC0600E3C00318C0CC0600600F00C0303301801800C0H0180H07F061E0C0H03007860601C70060630C606K01818C1CC060063030318C1CE0E60E00C0CC0307383983800C0H0180H03E07F60C0H06006030601860070630C60EK01C38E3C61C60E3870718E3C71C71C00E1CC038F1C71C70H0C0H0180H06301E60C0H0C006030601860030E30C71EJ060FF07EC3F83FC1FE7F7E7EC3F83F8007F8C01FB0FE0FE0H0HCH019800C180060CC00C006030661860C3FEFHF3F6J0607C03CC1F01F80F87B7E3CC1F01F0H03E0C00F307C07C0H0DC001B800C1800C0DC00C0660306E30C0C0F6FHF1E6gI0180S0C0R0F8001F0H0C18C0C0F800C0670707C30C0J030C006O03B0Q0180S0C0R0E0H01C0H0E38E1C0E0H060C30607030C0J030C006O07F0Q0180S0C0R0C0H0180H07F07F80C0H07FC1FC0606180J030C006O06E0Q010T0C0R0C0H0180H03E03E00C0H01F00F80606180J0208006,::::::::gO0C0C1F0H0183E1C33C07C1C018033C7006003700603F801F8030H0C300601F800FC0gO0C0C7F80018FF1E37E0FE0E018037E7806003380607FC07FF030H0C380607FE03FF0gO0C0C61C0018C3863C71C70601803C7180300618060E0E1E07830H0C3C060E0707038gO0C0CC0E001981C638338387018038318030061C060C061801C30H0C3C061C038601CgO0C0C006001800C6303301838180303180380E0E0618031800C30H0C360618018C00CgO0C0C006001800C63033018381803031801FFC0E0618031800E30H0C33063800CC006gO0C0CFFE0019FFC630330181C1803031801FFC070618031800630H0C330630H0C0H06gO0C0CFFE0019FFC630330180E1803031800C18038618031FC0630H0C318630H0C0H06gO0C0CC06001980C630330181FF803031800C1807FE18031FC0630FFC31C630H0C0H06gO0C1CC06001980C630338387FF803031800C181FFE18030I0630FFC30C630H0C0H06gO0E3C61C0038C3863031C70E01803031800630380618030I0630H0C306630H0C0H06gO07EC3F803F87F1FB030FE0C01803037E00630300618030I0E30H0C30663800C0H06gO03CC1F003D83E1FB0307C0C01803037E00770300618031800C30H0C303618018C00ChH060L0C0180I01800360300618030C01C30H0C301E1C038601ChH060L0E0180I01800360380618030F07830H0C301E0E0707038hH060L07FF80I018001C01FFE180307FF031FFC300E07FE03FF0hH040L03FF80I010H01C00FFE180301FC031FFC300601F800FC0,::::::~DG016.GRF,01152,012,
                                ,::::::::::::::::::::::::::::::::::::::::::::::::::N0F178801008841010M010984801008841010M010104801008842828:N0F104801008842828O090487F00884J4O090488100884J4M01090490100884J4N0F10490100BC48282R09010H0808282R0H810H0808282R087F00B050101,::::::::::::::::::::::::::::::::~DG017.GRF,00512,008,
                                ,::::::::::::::::::::::O0H841010:O0H842828::O0H8K4::O0BC48282P0808282:O0B050101,::::::::::::::::::::::::::::~DG018.GRF,02048,016,
                                ,:::Q0RE8,P01FQFC,Q0RF8,P01FQFC,Q0RFC,P01FQFC,Q0RF8,P01FQFC,Q0RFC,P01FQFC,Q0RF8,P01FQFC,Q0RFC,P01FQFC,,::::::::::::::O0140R040,P080,O01C0Q0140,P060R080,P070Q05,P030Q02,P0180P04,Q0800280H020H08,Q0400FC0H07001C,Q0200FE0H060020,Q0101FF5H570070,R081FFEIEH0C0,R0C1FF4H4501C0,R023FF0H010180,R031FF0H0103,R018FE0I082,R01DFF0H0144,S08380J08,S0730I0H10,S0H2K0A0,S01D0I01E0,T0A0J080,T070I01C0,T020I0380,T070I07C0,T0380H0280,T03C001C80,T0260H0H80,T0670010C0,T023002080,T061804040,T020808080,T04041C040,T02022,T040170040,W0C0080,T0401C0040,V01A,T040330040,T040218040,T040C1C040,V080,T041007040,U020020,T047FF1C40,U0BFF8820,T05FHF0440,T0E2AA8220,S0HF0400540,S08A0J0A0,R019C0I01E0,S0H8K060,R01DC0J070,S0F80J030,S0580J038,S0H8K028,R05DC0J054,R02080J0H2,R0H7D5J575,R0CFEJEHFH80,Q01CFC4I47F440,Q018FA0I038020,Q0307707FC7C030,Q020H08C8EB8008,Q0C0H07D57F401C,Q080I0FBA2,P010J0H540I07,P020J06EE0I02,P040J0H540I01C0,P080R080,O0180R040,,gJ040,,:::::::::::::::::::::~DG019.GRF,01152,012,
                                ,:::::::::::::::::::::::K07FC0K01FD0,K03FE0K01FF8,K07FFD0J01FHF,K03FFE0K0IF80,K07FHFC0I01FHFC0,K03FHFE0I01FIF0,K0H1IFJ0H17FFC,M03FF80K0HFC,N0HFC0K07FC,N03F80L0FE,N01FD0K01FF,O0FE0L03F80,O0HFM07FC0,O07F0L03F80,O07F0L01FC0,O03F80L0FC0,O01F80L0FC0,O03F80L0FE0,L01557FC0K017F0,L03FIF80L07E0,L07FIFC0L07E0,L03FIF80L07E0,L03FIFC0L07F0,L03FIF80L07E0,L07FIFC0L07E0,O03F80L0FE0,O01F80K01FF0,O03F80L0FC0,O07F0L01FC0,O03F0L01F80,O07F0L03FC0,O0FE0L03F80,N01FC0L07F,N03FC0L0FE,M017FC0K03FF,N0HF80K0HFC,M07FF0K05FFC,K02BFFE0J0BFHF8,K07FHFC0I01FIF0,K03FHF80I01FHF80,K07FFC0J01FHF40,K03FF80J01FFE,K07FD0K01FF0,K0280M0A,,:::::::::::::::::::::::::::~DG020.GRF,08192,064,
                                ,::::::::::::::::::::::::::jP02E212421E0108F00F17170E211D2E008,jP031212422101090810989891212331008,jP021212424081080810909081212121008,jP0I212420081080810909101212122008,jP03C21242008109F810909E0121213C008,jP0202124200810908109090012121201F8,jP021232460081190810989091232321008,jP01E1D23A4080E8F00F170F0E2D1D1E008,jV0H210M010M010I08,jT02021E0M010J02001003F8,,::gQ0C0N040gK0F0V03C,X040P010O040Q010Q01080M010L0420R040Q020,X040P010O040Q010Q010O010L040S040Q020,K0H84B84H4B810043C3C3C3C7E011C878047874B8100221E2081138E21F80F1097108F10BFC1H1710205C425C8484B88E041C101043C4102008F040,L084C4I4C410H0H242H24204028488404848CC41002H213080H09122081090989090908080018H8206242624484C49100221010042610I090840,L08484AA48410H0424242420802849020404848410055012880H0902408009090909090810H01084204242424484849100401010042510I090840,L08488AA48810H0404240401002848020404848810055012880H0902408009090909090810H01082204242442C848890H0401010042510I090840,L084F0AA4F010H0404240402004H480204FC84F0100553F2480H08E24081F9090909090820H0108FE04242781484F090H05C1010042490I090840,L08480AA48010H0423C42384004H48020484848010055212480H0812408109090909090840H010902042424024848090H062101004249001F90840,L08C851148410H03E423E4040082480204848C8410088A12280H0912408109198919091880H0189020624642448C8490H0421010042450I090840,L074791147810I0242024242083E90204787478100889E228003CE24080F0E970E8F0E880H01710205C3A3C84747890H042141403C450I090850,U010I0H420442420H04084040K010K02180H08002080I080L090I0101020M040I010H04218180H0430I090860,R0400FE007C3C7C3C3C0H04878040K0FE0J02080H08021F80I080L0BF800100FE0M040I090H03C1010I041003F8F040,,::iN040S040N0C,iN040S040M010,:iL087423C1E00479CB8748H8F0780107908E404008F390970E211D2E008,iM08C24221004844C48C88908840288489140400108909891212331008,iM0842424080404484848890902028048902080I08909081212121008,iM0842420080404484848890802028045903F80I08909101212122008,iM08424200804FC484848890802044FC28E110H01F8909E0121213C008,iM084242008048448484889080204484481H1I01089090012121201F8,iM08C6420080C844848C9H90802082848910A0H0108919091232321008,iM075A3C4083479E8474768F1020827908E0A0H08F3CE8F0E2D1D1E008,iR0210J040N0840K0800A0K080M010I08,iR01E0J040N0780K080040K080J02001003F8,,:::::jX020200827F3FA020490200208,jX020200800100A020488200308,jX07F7F08001009040484200288,jX0212110H01009FCF482200288,jX0J210H01008H8048FE00248,jX024241007F3F8H80490207248,jX0242420H01008500490208A28,jX0282820201008500490208A28,jX0303040H01008500490208A18,jX020207E07F3F820048FE07208,,:::::jV078787878FC1078787E020121E0,jV0H484H484081084H4820H012210,jV08484848410108484820H012408,jV08084808420208480820H012008,jV08084808440208480820H012008,jV084788478802078847E003F2008,jV07C847C848040847C820H012008,jW04840484844084048202012408,jW0H84088484808408820H012210,jV0F878F87878FC78F87E007F21E0,,:::iN080,:hW020E13F90F8090120A02023E3F820210808FC0821E1FC1002011E71C5C5C3C1008,hX0H1I08104010130A02024100820210809040822100410I01211226262421008,hX0208008104008228904024100810410412040824080410I01211024242421008,hX020800810I0FE289FC0240H081FC107F2040820080410I01211024242421008,hX02080081C0H0H4248H87E70H08088102H2040820080410I012110242424211F8,hX02080080380044248I820E3F8088102H2040FE009FC10I01211024242421208,hX0208008004002822850820100805010142040820080410I03211224262423208,hX0208008104002822850824100805010142040824080410020D1E79C425C3CD208,hX0208008104002821850824100805010141040822100410L010I040I0208,hX02080080F80010208207E3E3F8020FE080FC0821E1FCFE0K010I040I01F8,,iR0A0,iQ0140,,:::::::~DG021.GRF,02304,024,
                                ,:::::::::::::::::::::::::::::::::::::::::::::::::::J010E39783840404BC00E0F070381C4010H0F071CBC0FEJ0I10984H420404C201H108H8H4H240100108H84C2102J012089048210404820209010482412020010104482202J0100890482104048202090H0402012020010104482402J013F890482084049C0208F1FC02011FC0H0F10449C402J01208904821FC04E00208090402011040I09044E0402J012089048220404820208090482410880I0904482402J03110904I404048401H108H8H4H208800108H8484402I01D0E3D0438404047800E0F070381C0880H0F071E78402N080I0404040T050M0400202N080I0204040T050M0400102N080I01FC040T020M040H0FE,:::::::::::::::::::::::::::::::~DG022.GRF,00256,008,
                                ,::::::L0303FC3,L0307FC3,N0E0C3,N0C0C3,M0180C3,::::L03180C3,:N0C0C3,N0E0C3,N07FC3,N03FC3,,:::::::::~DG023.GRF,02688,028,
                                ,::::::::::::hO02,hI0540I0F80,hI0FE80H0F80,hG017FFD001FC0,hH0IFE0H0FC0,hG01FIFC00FE0,hG03FIF800FE0,hG07FJFH07F0,hG0KFE003E0,gV070I0LFH07F0,gV0F80H0LF803F8,gU01FC001FKFC03F0,gV0FC001FKF800F8,gU01FC001FKFC01FC,gU01FC003FKFE00F8,V010L010O01FC007FLF01FC,Q0280I0A0L0A0N01FC003FLFH0F8,O071FF1F07F8C07C07FC707018001FC007FLFC1FC,O020A38B8E28E0780E38203038003FC007FLF80F8,O071C1D39C11F1FC1C1C707018003FC017FLFD1FC,O02180818C00E0CE080C202838003FC00FMFE0F8,O071C1C1CF00C1C61C0C70701C001FC01FNF1FC,O023AB8383A0E186180E203038003F800FNF8F8,O071FF0185F1C1871C1D707018003FC01FHF5FLFC,O02188018038E382180C203038003FC03FFC03FKF8,O071C001C01CC7071C1C707018001FC07FFC01FKFC,O06180038038E3038808303838003FC0FHF800FKF8,N07F1F717D771F7031F7C7FIFI03FC1FHFH01FKFC,N0380AE0F87E0C2028BE80FEFE0H01FC3FFE0H07FJF8,N05405505C540440H0540054540H01FKFI07FJF0,T0380X03FJFE0H03FJF0,T010Y01FJFE0H01FJF0,gV0KFC0I0JFE0,gU01FJFC0I0KF0,gV0KF80I03FHFE0,gU01FJFC0I07FHFC0,gV0KF80I03FHF80,gV07FIFK01FHF,gV07FHFE0K03FE,gV07FIFL05FC,gV03FHFC0,gV01FHFC0,gW0IF80,gV01FHF,gW02F8,gW0150,,::::::::::::::::::::::::::::::::::::^XA
                                ^MMT
                                ^PW735
                                ^LL0735
                                ^LS0
                                ^BY42,42^FT659,437^BXI,3,200,0,0,1,~
                                ^FH\^FD'.$datamatrix.'^FS
                                ^FT560,606^A0I,20,19^FH\^FD'.$modelo.'^FS
                                ^FT362,337^A0I,20,19^FH\^FD'.$ssid.'^FS
                                ^FT362,309^A0I,20,19^FH\^FDWPA-PSK2^FS
                                ^FT362,283^A0I,20,19^FH\^FD'.$wlan_pass.'^FS
                                ^FT365,201^A0I,20,19^FH\^FD'.$ssid_5g.'^FS
                                ^FT362,175^A0I,20,19^FH\^FDWPA-PSK2^FS
                                ^FT362,150^A0I,20,19^FH\^FD'.$wlan_pass_5g.'^FS
                                ^FT142,513^A0I,20,19^FH\^FD'.$sace.'^FS
                                ^FT142,545^A0I,20,19^FH\^FD'.$fecha_fabricacion.'^FS
                                ^FT142,576^A0I,20,19^FH\^FD'.$nrc.'^FS
                                ^FT166,608^A0I,20,19^FH\^FD'.$codigo_cliente.'^FS
                                ^BY3,3,54^FT545,449^BCI,,Y,N
                                ^FD>:' . $serial . '^FS
                                ^BY2,3,50^FT300,56^BCI,,Y,N
                                ^FD>:' . $password_device . '^FS
                                ^FT0,640^XG000.GRF,1,1^FS
                                ^FT0,512^XG001.GRF,1,1^FS
                                ^FT608,640^XG002.GRF,1,1^FS
                                ^FT0,416^XG003.GRF,1,1^FS
                                ^FT32,736^XG004.GRF,1,1^FS
                                ^FT384,384^XG005.GRF,1,1^FS
                                ^FT384,352^XG006.GRF,1,1^FS
                                ^FT416,320^XG007.GRF,1,1^FS
                                ^FT384,224^XG008.GRF,1,1^FS
                                ^FT384,224^XG009.GRF,1,1^FS
                                ^FT416,192^XG010.GRF,1,1^FS
                                ^FT320,608^XG011.GRF,1,1^FS
                                ^FT256,576^XG012.GRF,1,1^FS
                                ^FT320,544^XG013.GRF,1,1^FS
                                ^FT576,640^XG014.GRF,1,1^FS
                                ^FT288,96^XG015.GRF,1,1^FS
                                ^FT576,288^XG016.GRF,1,1^FS
                                ^FT608,416^XG017.GRF,1,1^FS
                                ^FT608,640^XG018.GRF,1,1^FS
                                ^FT480,608^XG019.GRF,1,1^FS
                                ^FT0,736^XG020.GRF,1,1^FS
                                ^FT480,160^XG021.GRF,1,1^FS
                                ^FT384,448^XG022.GRF,1,1^FS
                                ^FT480,736^XG023.GRF,1,1^FS
                                ^FO488,626^GB0,109,2^FS
                                ^FO14,602^GB610,0,2^FS
                                ^FO570,603^GB0,22,2^FS
                                ^FO197,603^GB0,22,2^FS
                                ^FO415,509^GB0,93,2^FS
                                ^FO14,570^GB404,0,2^FS
                                ^FO14,540^GB404,0,2^FS
                                ^FO164,509^GB0,93,2^FS
                                ^FO34,275^GB652,95,2^FS
                                ^FO34,142^GB652,97,2^FS
                                ^FO34,30^GB652,81,2^FS
                                ^PQ1,0,1,Y^XZ
                                ^XA^ID000.GRF^FS^XZ
                                ^XA^ID001.GRF^FS^XZ
                                ^XA^ID002.GRF^FS^XZ
                                ^XA^ID003.GRF^FS^XZ
                                ^XA^ID004.GRF^FS^XZ
                                ^XA^ID005.GRF^FS^XZ
                                ^XA^ID006.GRF^FS^XZ
                                ^XA^ID007.GRF^FS^XZ
                                ^XA^ID008.GRF^FS^XZ
                                ^XA^ID009.GRF^FS^XZ
                                ^XA^ID010.GRF^FS^XZ
                                ^XA^ID011.GRF^FS^XZ
                                ^XA^ID012.GRF^FS^XZ
                                ^XA^ID013.GRF^FS^XZ
                                ^XA^ID014.GRF^FS^XZ
                                ^XA^ID015.GRF^FS^XZ
                                ^XA^ID016.GRF^FS^XZ
                                ^XA^ID017.GRF^FS^XZ
                                ^XA^ID018.GRF^FS^XZ
                                ^XA^ID019.GRF^FS^XZ
                                ^XA^ID020.GRF^FS^XZ
                                ^XA^ID021.GRF^FS^XZ
                                ^XA^ID022.GRF^FS^XZ
                                ^XA^ID023.GRF^FS^XZ
                                ';

                            }else {
                                $msg = "el logo indicado no existe";
                            }
                            $resultado = imprimir($impresora_destino,$codigo_etiqueta);
                            if (empty($resultado)) {
                                $msg = "El resultado de la impresión esta vacio";
                            } elseif ($resultado["Error_id"] == 0) {
                                $class = "alert alert-success alert-dismissible";
                                $msg = date("h:i:s") . ' > Etiqueta  con mac: ' . $mac . ' enviada a la impresora ' . $impresora_destino;
                            } else {
                                $msg = '<strong>Error ' . $resultado["Error_id"] . ': </strong> ' . $resultado["Error_msg"];
                            }
                        }
                    }
                }
            }
        }
    }
    $div_msg = "<div id=\"msg\" class=\"$class\" role=\"alert\">";
    $div_msg .= "<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>";
    $div_msg .= $msg;
    $div_msg .= "</div>";
}
?>
<html>
    <head>
            <!-- Bootstrap -->
        <link rel="stylesheet" href="../css/bootstrap.min.css">
        <link rel="stylesheet" href="../css/jquery-ui.css">
        <link rel="stylesheet" href="../css/validatorGUI.css">
        <link rel="stylesheet" href="../css/jquery.validationEngine.css">
        <link rel="stylesheet" href="../css/gestion.css">
        <style type="text/css">
            form.formateado {
                width: 400px;
            }
            form.formateado fieldset {
                width: 850px;
            }
            form input#boton_imprimir {
                width: 450px;
            }
            form select#impresora {
                width: 175px;
            }
        </style>
        <!-- jQuery (necessary for Bootstrap\'s JavaScript plugins) -->
        <script type="text/javascript" src="/js/libs/jquery.js"></script>
        <script type="text/javascript" src="/js/libs/bootstrap.bundle.min.js"></script>
        <script type="text/javascript" src="/js/libs/jquery-ui-1.10.3.custom.min.js"></script>
    </head>
    <body>
        <?php
        require_once __DIR__.'/../navbar.php';
        echo $div_msg;
        if (!isset($_SESSION['user_id'])) {
            echo '<div class="alert alert-info mt-4" role="alert">';
            echo '    <strong>Es necesario identificarse para usar la aplicaci&oacute;n.</strong>';
            echo '    <p>';
            echo '        Por favor, logueate empleando el formulario de la parte superior izquierda.';
            echo '    </p>';
            echo '</div>';
            exit();
        }
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            if (!isset($_SESSION['user_id']) && !$context) {
                echo '<div class="alert alert-danger mt-4" role="alert">';
                echo '    <strong>Email o Password incorrectos</strong>';
                echo '    <p>';
                echo '        Por favor, intentalo de nuevo.';
                echo '    </p>';
                echo '</div>';
                exit;
            }
        }
        ?>
        <div class="container">
            <div class="row">
            <!-- Modificar por esta ruta para utilizar en Tury  action='formulario_impresion.php'  -->
                <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
                    <form name="formulario_buscar"
                        id="formulario_buscar"
                        action= 'http://zelerislabels.turyelectro.com:8080/labels_printer/formulario_impresion_equipos.php'
                        method="POST">
                            <legend> <?php echo "Buscador" ?></legend>
                                    <label for="impresora">Impesora:<em>*</em></label>
                                    <select class ="form-control impresoraselecionada"  name="impresora">
                                        <option value="">Selecciona impresora</option>
                                        <?php
                                            foreach ($impresoras['HGU'] as $key => $value){
                                        ?>
                                                <option value="<?php  echo "$key";?>" <?php if ($key == $impresora_selecionada) { echo "SELECTED=SELECTED"; } ?>>
                                            <?php echo $key;?></option>
                                        <?php } ?>
                                    </select>
                                    <br>
                                <div class="form-label-group">
                                        <label for="serial">Serial:<em>*</em></label>
                                        <input name="serial" id="serial" class="form-control" value="" autofocus />
                                </div>
                                <br>
                        <input type="submit" value="Imprimir" id="boton_imprimir" class="btn btn-primary btn-lg center">
                    </form>
                    <script type="text/javascript">
                        $(document).keypress(function (event) {
                            if (event.which == 13) {
                                event.preventDefault();
                                        $("#formulario_buscar").submit();
                            }
                        });

                    </script>
                </div>
            </div>
        </div>
    </body>
</html>